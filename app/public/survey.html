<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" type="text/css" href="main.css" />
    <script src="../data/friends.js"></script>
    <script src="../routing/apiRoutes.js"></script>
</head>

<body>

    <h2>Simple Questions</h2>

    <h3><strong>About You</strong></h3>

    <h4>Name(required)</h4>

    <input type="text" id="name" class="form-control">

    <h4>Link to Photo Image(required)</h4>

    <input type="text" id="photo-image" class="form-control">

    <h3><strong>Question 1</strong></h3>
    <p>Do you enjoy sports?</p>

    <select id="quest1">
        <option>5 (strongly agree)</option>
        <option>4</option>
        <option>3</option>
        <option>2</option>
        <option>1 (strongly disagree)</option>
    </select>

    <h3><strong>Question 2</strong></h3>
    <p>Do you enjoy video games?</p>

    <select id="quest2">
        <option>5 (strongly agree)</option>
        <option>4</option>
        <option>3</option>
        <option>2</option>
        <option>1 (strongly disagree)</option>
    </select>

    <h3><strong>Question 3</strong></h3>
    <p>Do you like going outdoors?</p>

    <select id="quest3">
        <option>5 (strongly agree)</option>
        <option>4</option>
        <option>3</option>
        <option>2</option>
        <option>1 (strongly disagree)</option>
    </select>

    <h3><strong>Question 4</strong></h3>
    <p>Do you enjoy working out?</p>

    <select id="quest4">
        <option>5 (strongly agree)</option>
        <option>4</option>
        <option>3</option>
        <option>2</option>
        <option>1 (strongly disagree)</option>
    </select>

    <h3><strong>Question 5</strong></h3>
    <p>Do you enjoy reading books?</p>

    <select id="quest5">
        <option>5 (strongly agree)</option>
        <option>4</option>
        <option>3</option>
        <option>2</option>
        <option>1 (strongly disagree)</option>
    </select>

    <h3><strong>Question 6</strong></h3>
    <p>Do you like learning new technology?</p>

    <select id="quest6">
        <option>5 (strongly agree)</option>
        <option>4</option>
        <option>3</option>
        <option>2</option>
        <option>1 (strongly disagree)</option>
    </select>

    <h3><strong>Question 7</strong></h3>
    <p>Do you enjoy traveling?</p>

    <select id="quest7">
        <option>5 (strongly agree)</option>
        <option>4</option>
        <option>3</option>
        <option>2</option>
        <option>1 (strongly disagree)</option>
    </select>

    <h3><strong>Question 8</strong></h3>
    <p>Do you like going out to bars?</p>

    <select id="quest8">
        <option>5 (strongly agree)</option>
        <option>4</option>
        <option>3</option>
        <option>2</option>
        <option>1 (strongly disagree)</option>
    </select>

    <h3><strong>Question 9</strong></h3>
    <p>Do you like meeting new people?</p>

    <select id="quest9">
        <option>5 (strongly agree)</option>
        <option>4</option>
        <option>3</option>
        <option>2</option>
        <option>1 (strongly disagree)</option>
    </select>

    <h3><strong>Question 10</strong></h3>
    <p>Do you like trying new things?</p>

    <select id="quest10">
        <option>5 (strongly agree)</option>
        <option>4</option>
        <option>3</option>
        <option>2</option>
        <option>1 (strongly disagree)</option>
    </select>


    <div id="myModal" class="modal">

        <div class="text-center modal-content">
            <span class="close">&times;</span>
            <h2>You now have a new bestie!<h2>
            <h3 class = "text-center font-weight-bold" id = "bestie"></h3>
            <img id ="image" src="" alt="cat">

        </div>

    </div>

    <button type="submit" class="btn btn-primary" id="submit">Submit</button>

    <script>

        $("#submit").on("click", function (event) {
            event.preventDefault();
            let score = []

            for (let i = 1; i < 11; i++) {
                score.push(parseInt($(`#quest${i}`).val()));
            }

            if (score.length === 10 && $("#name").val().trim() && $("#photo-image").val().trim()) {
                const newFriend = {
                    scores: score,
                    name: $("#name").val().trim(),
                    photoimage: $("#photo-image").val().trim(),
                };

                $.post("/api/friends", newFriend, function (data) {
                    console.log(data)
                    var modal = document.getElementById('myModal');

                var span = document.getElementsByClassName("close")[0];

                modal.style.display = "block";
                $("#bestie").text(data.name);
                $("#image").attr("src",data.photo)
                span.onclick = function () {
                        modal.style.display = "none";
                    }
                    window.onclick = function (event) {
                        if (event.target == modal) {
                            modal.style.display = "none";
                        }
                    }
                });
            }});
                
                

                    
            

    </script>

</body>

</html>